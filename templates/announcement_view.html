{#{% extends 'taskbar.html' %}#}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .dashboard {
      width: 250px; /* Taskbar width */
      height: 100vh;
      background-color: #333;
      color: #fff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      padding: 0;
      position: fixed; /* Fixing the sidebar */
      top: 0;
      left: 0;
      z-index: 1;
      transition: margin-left 0.3s ease; /* Smooth transition for hiding */
    }

    .dashboard.hide {
      margin-left: -250px; /* Move out of view when hidden */
    }

    .dashboard-header {
      background-color: #890604;
      height: 50px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      padding-top: 10px;
      padding-left: 10px;
      text-align: left;
    }

    .dashboard-header h2 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0;
      color: inherit;
    }

    .dashboard-content {
      padding: 20px;
    }

    .dashboard-content ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .dashboard-content li {
      padding: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
    }

    .dashboard-content li:last-child {
      border-bottom: none;
    }

    .dashboard-content a {
      color: inherit; /* Inherit the dashboard text color */
      text-decoration: none; /* No underline */
      flex: 1; /* Allow links to fill space */
    }

    .dashboard-content a:hover {
      color: #D5A84C; /* Change color on hover */
    }

    .navbar {
      background-color: transparent; /* Transparent navbar */
      border: none; /* No border */
      margin-top: auto; /* Push to bottom */
      padding: 0; /* No padding */
    }

    .navbar.nav-item {
      margin: 0 10px; /* Spacing between nav items */
    }

    .toggle-dashboard {
      position: fixed; /* Fixed position */
      top: 10px; /* Position from top */
      left: calc(250px + 10px); /* Position next to dashboard */
      z-index: 2; /* Above other elements */
      background-color: #890604; /* Button color */
      color: #FFFFFF; /* Text color */
      border: none; /* No border */
      font-size: 16px; /* Font size */
      cursor: pointer; /* Pointer cursor on hover */
    }

    .main-content {
      margin-left: 250px; /* Push content to the right by taskbar width */
      padding: 20px; /* Add padding for spacing */
      height: calc(100vh - 20px); /* Full height minus padding for overflow handling */
      overflow-y: auto; /* Enable scrolling if content is too long */
      transition: margin-left 0.3s ease; /* Smooth transition for content area */
    }

    .main-content.shifted {
        margin-left: 0; /* Remove margin when dashboard is hidden */
    }

    @media (max-width: 767.98px) {
        .dashboard {
            width: 100%; 
            height:auto; 
            position:absolute; 
            margin-left :0; 
        }
        .main-content {
            margin-left :0 ; 
            height:auto ; 
        }
        .toggle-dashboard {
            left :10px ; 
        }
     }
   </style>
</head>
<body>
 {% if user.is_student %}
 <button class="toggle-dashboard">Hide Dashboard</button> <!-- Button now says "Hide" by default -->
 <div class="dashboard">
   <div class="dashboard-header">
     <h2>Dashboard</h2>
   </div>
   <div class="dashboard-content">
     <ul>
       <li><a href="{% url 'class:home_view' %}">Courses</a></li>
       {% if obj and obj.pk %}
         <li><a href="{% url 'class:course_view' obj.pk %}">Home</a></li>
         <li><a href="{% url 'class:announcement_view' obj.pk %}">Announcements</a></li>
         <li><a href="{% url 'class:materials_view' obj.pk %}">Modules</a></li>
         <li><a href="{% url 'class:activities_view' obj.pk %}">Activities / Quizzes</a></li>
         <li><a href="{% url 'class:grades_view' obj.pk %}">Grades</a></li>
       {% else %}
         <span>
           <li><a href="{% url 'class:all_announcements_view' %}">Announcements</a></li>
           <li><a href="{% url 'class:all_materials_view' %}">Modules</a></li>
         </span>
       {% endif %}
       <li><a href="{% url 'class:change_password' %}">Change Password</a></li>
     </ul>
     <nav class="navbar">
       <ul class="navbar-nav ml-auto">
         <li class="nav-item">
           <a class="nav-link" href="{% url 'class:logout' %}">Logout</a>
         </li>
       </ul>
     </nav>
   </div>
 </div>
 {% endif %}

 {% if user.is_professor %}
 <button class="toggle-dashboard">Hide Dashboard</button> <!-- Button now says "Hide" by default -->
 <div class="dashboard">
   <div class="dashboard-header">
     <h2>Dashboard</h2>
   </div>
   <div class="dashboard-content">
     <ul>
        <li><a href="{% url 'class:home_view' %}">Courses</a></li>
                {% if obj and obj.pk %}
                    <li>
                    <a href="{% url 'class:course_view' obj.pk %}">Home</a>
                    </li>
                    <li><a href="{% url 'class:announcement_view' obj.pk %}">Announcements</a></li>
                    <li><a href="{% url 'class:materials_view' obj.pk %}">Modules</a></li>
                    <li><a href="{% url 'class:activities_view' obj.pk %}">Activities / Quizzes</a></li>
                    <li><a href="{% url 'class:grades_view' obj.pk %}">Grades</a></li>
                {% else %}
                    <span>
                        <li><a href="{% url 'class:all_announcements_view' %}">Announcements</a></li>
                        <li><a href="{% url 'class:all_materials_view' %}">Modules</a></li>
                    </span>
                {% endif %}

        <li><a href="{% url 'class:change_password' %}">Change Password</a></li>
      </ul>
     <nav class="navbar">
       <ul class="navbar-nav ml-auto">
         <li class="nav-item">
           <a class="nav-link" href="{% url 'class:logout' %}">Logout</a> <!-- Adjust as necessary -->
         </li>
       </ul>
     </nav>
   </div>
 </div>
 {% endif %}
 
 <!-- Inject content here for pages that extend this template -->
<div class="main-content">
   {% block content %}
   <!-- Default content can be added here if needed -->
   {% endblock %}
</div>

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> <!-- Bootstrap JS -->
<script>
// Toggle dashboard visibility
const toggleButton = document.querySelector('.toggle-dashboard');
const dashboard = document.querySelector('.dashboard');
const mainContent = document.querySelector('.main-content');

toggleButton.addEventListener('click', () => {
   dashboard.classList.toggle('hide');
   mainContent.classList.toggle('shifted'); // Adjust main content margin

   // Update the button text depending on the dashboard state
   if (dashboard.classList.contains('hide')) {
     toggleButton.textContent = 'Show Dashboard';
   } else {
     toggleButton.textContent = 'Hide Dashboard';
   }
});
</script>

{% endblock scripts %}
</body>
</html>

{% load static %}
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'profile.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

{% block inner_content %}
<div class="content-container">
    <h1>All Announcements</h1>

    <!-- Add Announcement Button for Professors -->
    {% if user.is_professor %}
        <a href="{% url 'class:add_announcement' obj.pk %}">
            <button type="button" class="custom-btn">Add Announcement</button>
        </a>
    {% endif %}

    <!-- Announcement Timeline -->
    <div class="main-content">
        <div class="timeline"> <!-- Announcement timeline style -->
            <ul class="timeline">
                {% for announcement in announcements %}
                <li>
                    <div class="timeline-time">
                        <span class="date">{{ announcement.posted_on|date:"F d, Y" }}</span>
                    </div>
                    <div class="timeline-icon">
                        <a href="#"></a> <!-- Placeholder for an icon if needed -->
                    </div>
                    <div class="timeline-body">
                        <div class="timeline-header">
                            <h3 class="timeline-title">{{ announcement.title }}</h3>
                        </div>
                        <div class="timeline-content">
                            <p>{{ announcement.content }}</p>
                        </div>
                    </div>
                </li>
                {% empty %}
                <li>No announcements available.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock inner_content %}
<script>
    function toggleModuleContent(headerElement) {
        var content = headerElement.nextElementSibling;
        var toggleIcon = headerElement.querySelector('.toggle-icon');
        if (content.style.display === "block") {
            content.style.display = "none";
            toggleIcon.classList.add("collapsed");
        } else {
            content.style.display = "block";
            toggleIcon.classList.remove("collapsed");
        }
    }
</script>