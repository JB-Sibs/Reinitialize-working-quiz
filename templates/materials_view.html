{% extends 'taskbar.html' %}
{% load static %}

{% block scripts %}
    <script src="{% static 'quizzes/main.js' %}?v=1" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'profile.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'quiz.css' %}">

    <script>
        const toggleButton = document.querySelector('.toggle-dashboard');
        const dashboard = document.querySelector('.dashboard');

        toggleButton.addEventListener('click', () => {
            dashboard.classList.toggle('hide');
            toggleButton.textContent = dashboard.classList.contains('hide') ? 'Show Dashboard' : 'Hide Dashboard';
        });
    </script>
{% endblock scripts %}

{% block content %}
    <!-- Main Content -->
    <div class="content-container">
        <h1>{{ obj.name }} Materials</h1>

        {% if user.is_professor or user.is_admin %}
            <a href="{% url 'class:add_module' obj.pk %}">
                <button type="button" class="custom-btn">Add Material</button>
            </a>
        {% endif %}

        <div class="module-section" style="margin-left: 150px; border: 1px solid #ccc; padding: 20px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); border-radius: 8px;">
            <div class="module-content">
                <ul class="materials-list">
                    {% for material in materials %}
                        <li class="module-item mb-3"> <!-- Added margin-bottom for spacing -->
                            <h3>{{ material.title }}</h3>
                            {% if material.type in "png jpg jpeg" %}
                                <!-- Image Preview -->
                                <img src="{{ material.url }}" alt="{{ material.title }}" style="max-width: 100%; height: auto;" />
                            {% elif material.type in "pdf doc docx" %}
                                <p><a href="{{ material.url }}" download>Download File</a></p>
                            {% else %}
                                <!-- Fallback for other file types -->
                                <p><a href="{{ material.url }}" target="_blank">Download File</a></p>
                            {% endif %}
                            <p><small>Posted on: {{ material.posted_on|date:"F d, Y" }}</small></p>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Additional Sections (if any) -->
        <!-- Add any other sections like quizzes or announcements here if necessary -->

    </div>
{% endblock %}